<h2>Current Objective</h2>

<ul>
  <li>
    Enable execution of source blocks
    <ul>
      <li>Add Run link to header prior to source block</li>
      <li>
        Define new request type which executes blocks by section id
        <ul>
          <li>section id â‰¡ {page hash, fragment index}</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h2>TODO</h2>

<ul>
  <li>define server-side behavior to execute programs by section id and stream stdout/stderr to client via <a href="http://en.wikipedia.org/wiki/Comet_(programming)">COMET</a></li>
  <li>define article title character white list (regex) and ensure that it is used throughout</li>
  <li>
    define server-side behavior to add program fragment microdata
    <ul>
      <li>define client-side behavior to add Run link according to program fragment microdata</li>
      <li><s>parse and walk tree using jsoup</s></li>
      <li><s>store last section id, defaulting to article title</s></li>
      <li><s>store last header element</s></li>
      <li><s>upon encountering a program fragment, add program fragment microdata to header element</s></li>
    </ul>
  </li>
  <li>define server-side behavior to get/set source by "section id" in the form of "Article#Heading"</li>
  <li><s>fix encoding as UTF-8 before progressing with further development.</s></li>
  <li><s>determine how Wikipedia represents source code blocks</s></li>
</ul>

<pre class="source" data-lang="sh">
echo "Hello World"
</pre>

<h2>Running a Fragment</h2>

<p>A program fragment must be identified uniquely if it is to be executed by the server. Program fragments can be identified uniquely using a combination of fragment index and page hash. Including page hash as a component of the identifier ensures that the index of the program fragment will not have changed in the time between when the page was sent to the client and when the server was requested to run the fragment.</p>

<h3>Example Program Fragment</h3>

<p>The following block of code is an example program fragment that could be embedded into a wiki page.</p>

<pre class="source" data-lang="perl">
#require `Wiki: Another_Page#Some_Section`

print "hello"
</pre>